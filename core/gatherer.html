<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gatherer | Pyot</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="2020 High level Python framework for the Riot Games API, support for AsyncIO and Django">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/Pyot/assets/css/0.styles.c26d366c.css" as="style"><link rel="preload" href="/Pyot/assets/js/app.24095c48.js" as="script"><link rel="preload" href="/Pyot/assets/js/2.498ad1fd.js" as="script"><link rel="preload" href="/Pyot/assets/js/15.482c3d4a.js" as="script"><link rel="preload" href="/Pyot/assets/js/3.ca271cab.js" as="script"><link rel="prefetch" href="/Pyot/assets/js/10.64c693c9.js"><link rel="prefetch" href="/Pyot/assets/js/11.d1c21eb6.js"><link rel="prefetch" href="/Pyot/assets/js/12.a0a9adec.js"><link rel="prefetch" href="/Pyot/assets/js/13.03738003.js"><link rel="prefetch" href="/Pyot/assets/js/14.77fb8af2.js"><link rel="prefetch" href="/Pyot/assets/js/16.df1416c0.js"><link rel="prefetch" href="/Pyot/assets/js/17.85f1ba12.js"><link rel="prefetch" href="/Pyot/assets/js/18.ad010394.js"><link rel="prefetch" href="/Pyot/assets/js/19.d6dd795e.js"><link rel="prefetch" href="/Pyot/assets/js/20.0ed60599.js"><link rel="prefetch" href="/Pyot/assets/js/21.953fb012.js"><link rel="prefetch" href="/Pyot/assets/js/22.111bfa9e.js"><link rel="prefetch" href="/Pyot/assets/js/23.de98c4c8.js"><link rel="prefetch" href="/Pyot/assets/js/24.8fcffdff.js"><link rel="prefetch" href="/Pyot/assets/js/25.7fa92b08.js"><link rel="prefetch" href="/Pyot/assets/js/26.52b021d1.js"><link rel="prefetch" href="/Pyot/assets/js/27.0d48a0b6.js"><link rel="prefetch" href="/Pyot/assets/js/28.ea1bc013.js"><link rel="prefetch" href="/Pyot/assets/js/29.31070a52.js"><link rel="prefetch" href="/Pyot/assets/js/30.0afdac4e.js"><link rel="prefetch" href="/Pyot/assets/js/31.317b6b98.js"><link rel="prefetch" href="/Pyot/assets/js/32.c46898b3.js"><link rel="prefetch" href="/Pyot/assets/js/33.64ac7640.js"><link rel="prefetch" href="/Pyot/assets/js/34.f982f449.js"><link rel="prefetch" href="/Pyot/assets/js/35.5093b43d.js"><link rel="prefetch" href="/Pyot/assets/js/36.9849747c.js"><link rel="prefetch" href="/Pyot/assets/js/37.0a0d730b.js"><link rel="prefetch" href="/Pyot/assets/js/38.ac57655f.js"><link rel="prefetch" href="/Pyot/assets/js/39.f19bcc94.js"><link rel="prefetch" href="/Pyot/assets/js/4.73f5e33d.js"><link rel="prefetch" href="/Pyot/assets/js/40.05c1cd74.js"><link rel="prefetch" href="/Pyot/assets/js/41.5fbd81bc.js"><link rel="prefetch" href="/Pyot/assets/js/42.45762431.js"><link rel="prefetch" href="/Pyot/assets/js/43.8e433308.js"><link rel="prefetch" href="/Pyot/assets/js/44.d7f6585f.js"><link rel="prefetch" href="/Pyot/assets/js/45.b221002e.js"><link rel="prefetch" href="/Pyot/assets/js/46.ce98b8cb.js"><link rel="prefetch" href="/Pyot/assets/js/47.8c5fe273.js"><link rel="prefetch" href="/Pyot/assets/js/48.b1f4b5fe.js"><link rel="prefetch" href="/Pyot/assets/js/49.81d1ea40.js"><link rel="prefetch" href="/Pyot/assets/js/5.47ee199e.js"><link rel="prefetch" href="/Pyot/assets/js/50.3948d3a3.js"><link rel="prefetch" href="/Pyot/assets/js/51.1dd5e025.js"><link rel="prefetch" href="/Pyot/assets/js/52.a0fb1394.js"><link rel="prefetch" href="/Pyot/assets/js/53.25536ebf.js"><link rel="prefetch" href="/Pyot/assets/js/54.6e06dae3.js"><link rel="prefetch" href="/Pyot/assets/js/55.140677dc.js"><link rel="prefetch" href="/Pyot/assets/js/56.65084ef2.js"><link rel="prefetch" href="/Pyot/assets/js/57.e346038b.js"><link rel="prefetch" href="/Pyot/assets/js/58.f4d4953d.js"><link rel="prefetch" href="/Pyot/assets/js/59.6417b26c.js"><link rel="prefetch" href="/Pyot/assets/js/6.44cf85d5.js"><link rel="prefetch" href="/Pyot/assets/js/60.f84ea792.js"><link rel="prefetch" href="/Pyot/assets/js/61.19e79614.js"><link rel="prefetch" href="/Pyot/assets/js/62.5750ae8b.js"><link rel="prefetch" href="/Pyot/assets/js/63.382bab60.js"><link rel="prefetch" href="/Pyot/assets/js/64.f15e322b.js"><link rel="prefetch" href="/Pyot/assets/js/65.be010e91.js"><link rel="prefetch" href="/Pyot/assets/js/66.e8fd1f3f.js"><link rel="prefetch" href="/Pyot/assets/js/67.6613980b.js"><link rel="prefetch" href="/Pyot/assets/js/68.28e7c788.js"><link rel="prefetch" href="/Pyot/assets/js/69.124f054e.js"><link rel="prefetch" href="/Pyot/assets/js/7.fe573b63.js"><link rel="prefetch" href="/Pyot/assets/js/70.62c196d4.js"><link rel="prefetch" href="/Pyot/assets/js/71.0663f95d.js"><link rel="prefetch" href="/Pyot/assets/js/72.fcb246d9.js"><link rel="prefetch" href="/Pyot/assets/js/73.0ced6325.js"><link rel="prefetch" href="/Pyot/assets/js/74.cabd08e0.js"><link rel="prefetch" href="/Pyot/assets/js/75.4d136a6b.js"><link rel="prefetch" href="/Pyot/assets/js/76.6a485cac.js"><link rel="prefetch" href="/Pyot/assets/js/77.ae902065.js"><link rel="prefetch" href="/Pyot/assets/js/78.2056e9cd.js"><link rel="prefetch" href="/Pyot/assets/js/79.b9eefe33.js"><link rel="prefetch" href="/Pyot/assets/js/8.e3b2ac87.js"><link rel="prefetch" href="/Pyot/assets/js/80.88cbff08.js"><link rel="prefetch" href="/Pyot/assets/js/81.1f01b129.js"><link rel="prefetch" href="/Pyot/assets/js/82.cfb2adfe.js"><link rel="prefetch" href="/Pyot/assets/js/83.226ef7f9.js"><link rel="prefetch" href="/Pyot/assets/js/84.56e88f5f.js"><link rel="prefetch" href="/Pyot/assets/js/85.a4e7132c.js"><link rel="prefetch" href="/Pyot/assets/js/86.747a909f.js"><link rel="prefetch" href="/Pyot/assets/js/87.5f6383b5.js"><link rel="prefetch" href="/Pyot/assets/js/88.150f14b9.js"><link rel="prefetch" href="/Pyot/assets/js/89.1d577710.js"><link rel="prefetch" href="/Pyot/assets/js/9.c06410c6.js"><link rel="prefetch" href="/Pyot/assets/js/90.5230b2c6.js"><link rel="prefetch" href="/Pyot/assets/js/91.bff84414.js"><link rel="prefetch" href="/Pyot/assets/js/92.b32b1345.js"><link rel="prefetch" href="/Pyot/assets/js/93.68e30b81.js"><link rel="prefetch" href="/Pyot/assets/js/94.ee50abeb.js"><link rel="prefetch" href="/Pyot/assets/js/95.e54a9612.js">
    <link rel="stylesheet" href="/Pyot/assets/css/0.styles.c26d366c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Pyot/" class="home-link router-link-active"><!----> <span class="site-name">Pyot</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Pyot/core/" class="nav-link router-link-active">
  Core
</a></div><div class="nav-item"><a href="/Pyot/pipeline/" class="nav-link">
  Pipeline
</a></div><div class="nav-item"><a href="/Pyot/models/" class="nav-link">
  Models
</a></div><div class="nav-item"><a href="/Pyot/stores/" class="nav-link">
  Stores
</a></div><div class="nav-item"><a href="/Pyot/limiters/" class="nav-link">
  Limiters
</a></div><div class="nav-item"><a href="/Pyot/utils/" class="nav-link">
  Utils
</a></div><div class="nav-item"><a href="/Pyot/topics/" class="nav-link">
  Topics
</a></div><div class="nav-item"><a href="/Pyot/devs/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="https://github.com/paaksing/pyot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Pyot/core/" class="nav-link router-link-active">
  Core
</a></div><div class="nav-item"><a href="/Pyot/pipeline/" class="nav-link">
  Pipeline
</a></div><div class="nav-item"><a href="/Pyot/models/" class="nav-link">
  Models
</a></div><div class="nav-item"><a href="/Pyot/stores/" class="nav-link">
  Stores
</a></div><div class="nav-item"><a href="/Pyot/limiters/" class="nav-link">
  Limiters
</a></div><div class="nav-item"><a href="/Pyot/utils/" class="nav-link">
  Utils
</a></div><div class="nav-item"><a href="/Pyot/topics/" class="nav-link">
  Topics
</a></div><div class="nav-item"><a href="/Pyot/devs/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="https://github.com/paaksing/pyot" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Pyot/core/" aria-current="page" class="sidebar-link">Pyot</a></li><li><a href="/Pyot/core/installation.html" class="sidebar-link">Installation Guide</a></li><li><a href="/Pyot/core/startup.html" class="sidebar-link">Quick Start Guide</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Integrations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Pyot/core/django.html" class="sidebar-link">Django</a></li><li><a href="/Pyot/core/celery.html" class="sidebar-link">Celery</a></li><li><a href="/Pyot/core/syot.html" class="sidebar-link">Syot</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Cores</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Pyot/core/apiobjects.html" class="sidebar-link">Objects</a></li><li><a href="/Pyot/core/settings.html" class="sidebar-link">Settings</a></li><li><a href="/Pyot/core/gatherer.html" aria-current="page" class="active sidebar-link">Gatherer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pyot/core/gatherer.html#pyot-gatherer-api" class="sidebar-link">Pyot Gatherer API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pyot/core/gatherer.html#init-workers-int-25-log-level-int-10-cancel-on-raise-bool-false" class="sidebar-link">__init__(workers: int = 25, log_level: int = 10, cancel_on_raise: bool = False)</a></li><li class="sidebar-sub-header"><a href="/Pyot/core/gatherer.html#statements" class="sidebar-link">statements</a></li><li class="sidebar-sub-header"><a href="/Pyot/core/gatherer.html#gather" class="sidebar-link">gather()</a></li><li class="sidebar-sub-header"><a href="/Pyot/core/gatherer.html#responses" class="sidebar-link">responses</a></li></ul></li><li class="sidebar-sub-header"><a href="/Pyot/core/gatherer.html#example-usage" class="sidebar-link">Example Usage</a></li></ul></li><li><a href="/Pyot/core/queue.html" class="sidebar-link">Queue</a></li><li><a href="/Pyot/core/exceptions.html" class="sidebar-link">Exceptions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Migrations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Pyot/core/v2tov3.html" class="sidebar-link">Version 2 → 3</a></li><li><a href="/Pyot/core/v3tov31.html" class="sidebar-link">Version 3.0 → 3.1</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gatherer"><a href="#gatherer" class="header-anchor">#</a> Gatherer</h1> <p>This is an object to gather data by chunks. The Gatherer creates a session and stores this session under each of the pipelines <code>sessions</code> dict with an <code>uuid4()</code> key to give the highest uniqueness possible. This session id is added to each of the objects in the <code>statements</code> provided. After finishing the execution of all the statements, it then proceeds to delete the session from the pipeline.</p> <div class="custom-block tip"><p class="custom-block-title">ABOUT</p> <p>This manager is only recommended for working with a small amount of Pyot Core Objects for short time bursts. If you need to execute custom tasks written by you or working with large amount of objects, you should use a <a href="/Pyot/core/queue.html">Queue</a> instead.</p></div> <div class="custom-block warning"><p class="custom-block-title">INFO</p> <p>All of the <code>statements</code> provided needs to be an instance of the Pyot Core object and <strong><code>get()</code> must NOT be appended to the instance, as <code>get()</code> is &quot;unchainable&quot; so Pyot Gatherer has no way of calling <code>get(sid=...)</code> again</strong>. It will raise a <code>RuntimeError</code> if this happens.</p> <p><code>query()</code> and other methods (that are not coroutines) that returns <code>self</code> <strong>can be appended to the <code>statement</code></strong>.
Pyot Gatherer will automatically append <code>get()</code> to the instance after setting the session id.</p> <p>Gatherer workers are NOT real workers, that is the size of the chunk to gather.</p></div> <div class="custom-block warning"><p class="custom-block-title">RELEVANT TOPIC</p> <ul><li><a href="/Pyot/topics/why_not_asyncio_gather.html">Why not use asyncio.gather ?</a>.</li></ul></div> <h2 id="pyot-gatherer-api"><a href="#pyot-gatherer-api" class="header-anchor">#</a> Pyot Gatherer API</h2> <p>This object creates a manager that speeds up the normal data gathering. All statements and responses are instantiated to this object and can be referenced back.
This object is imported at the core module of pyot.</p> <div class="language-python line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br></div><pre class="language-python"><code><span class="token keyword">from</span> pyot<span class="token punctuation">.</span>core <span class="token keyword">import</span> Gatherer

<span class="token keyword">async</span> <span class="token keyword">with</span> Gatherer<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> gatherer<span class="token punctuation">:</span>
    <span class="token comment"># DO STUFF</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This object is preferably used as a context manager because it will clean up the instance after the <code>with</code> statement freeing memory. Although nothing stops you from doing <code>gatherer = pyot.Gatherer()</code>.</p></div> <blockquote><h3 id="init-workers-int-25-log-level-int-10-cancel-on-raise-bool-false"><a href="#init-workers-int-25-log-level-int-10-cancel-on-raise-bool-false" class="header-anchor">#</a> <code>__init__(workers: int = 25, log_level: int = 10, cancel_on_raise: bool = False)</code></h3> <p>Creates an instance of Gatherer with the respective params, these params are set when Pyot Settings was set if specified the <code>GATHERER</code> param, you can also override partial settings at runtime by passing the params on instance creation:</p> <ul><li><code>workers</code> <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>param</span> -&gt; <code>int</code>: Maximum number of concurrent connections and tasks allowed for this Gatherer. Increasing the number of workers may increase or decrease performance. Defaults to 25.</li> <li><code>log_level</code> <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>param</span> -&gt; <code>bool</code>: Set the log level for the Gatherer (does not affect pipeline logs). Defaults to 10 (DEBUG level).</li> <li><code>cancel_on_raise</code> <span class="badge warning" style="vertical-align:middle;" data-v-15b7b770>param</span> -&gt; <code>bool</code>: Cancel all remaining tasks if one raises exception. Defaults to <code>False</code>.</li></ul></blockquote> <blockquote><h3 id="statements"><a href="#statements" class="header-anchor">#</a> <code>statements</code> <span class="badge error" style="vertical-align:middle;" data-v-15b7b770>property</span></h3> <p>Property where statements are stored for gathering, it starts as an empty list, it can be used by <code>append()</code>-ing Pyot Core instances or directly overriding the list with a prepared one.</p></blockquote> <blockquote><h3 id="gather"><a href="#gather" class="header-anchor">#</a> <code>gather()</code> <span class="badge error" style="vertical-align:middle;" data-v-15b7b770>function</span> <span class="badge error" style="vertical-align:middle;" data-v-15b7b770>awaitable</span></h3> <p>Starts by appending the new created session and the awaitable <code>get()</code> to the Pyot Core instance, then starts the gather process, once finished it closes the session and saves all responses to <code>responses</code> and returns it.</p></blockquote> <blockquote><h3 id="responses"><a href="#responses" class="header-anchor">#</a> <code>responses</code> <span class="badge error" style="vertical-align:middle;" data-v-15b7b770>property</span></h3> <p>Property where all the responses are saved, developers would want to assign this data to a variable before leaving the <code>async with</code> statement.
::: TIP
Since v1.1.0 <code>gather()</code> will return <code>responses</code> by default.
:::</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>You can use the same gatherer to <code>gather()</code> multiple list of statements by overriding it after saving the responses, this creates a nice way to do everything in a single Gatherer. For example: get ChallengerLeague -&gt; get all Summoners in the entries -&gt; pull match history of all the Summoners.</p></div> <h2 id="example-usage"><a href="#example-usage" class="header-anchor">#</a> Example Usage</h2> <div class="language-python line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-python"><code><span class="token keyword">from</span> pyot<span class="token punctuation">.</span>models <span class="token keyword">import</span> lol
<span class="token keyword">from</span> pyot<span class="token punctuation">.</span>core <span class="token keyword">import</span> Gatherer
<span class="token keyword">from</span> pyot<span class="token punctuation">.</span>utils <span class="token keyword">import</span> loop_run
<span class="token keyword">from</span> typing <span class="token keyword">import</span> List

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">pull_leagues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    league <span class="token operator">=</span> <span class="token keyword">await</span> lol<span class="token punctuation">.</span>ChallengerLeague<span class="token punctuation">(</span>queue<span class="token operator">=</span><span class="token string">&quot;RANKED_SOLO_5x5&quot;</span><span class="token punctuation">,</span> platform<span class="token operator">=</span><span class="token string">&quot;NA1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> Gatherer<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> gatherer<span class="token punctuation">:</span> <span class="token comment"># type: pyot.Gatherer</span>
        gatherer<span class="token punctuation">.</span>statements <span class="token operator">=</span> <span class="token punctuation">[</span>entry<span class="token punctuation">.</span>summoner <span class="token keyword">for</span> entry <span class="token keyword">in</span> league<span class="token punctuation">.</span>entries<span class="token punctuation">]</span>
        responses <span class="token operator">=</span> <span class="token keyword">await</span> gatherer<span class="token punctuation">.</span>gather<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># type: List[pyot.lol.Summoner]</span>
    <span class="token keyword">for</span> r <span class="token keyword">in</span> responses<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>profile_icon_id<span class="token punctuation">)</span>

loop_run<span class="token punctuation">(</span>pull_leagues<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="custom-block danger"><p class="custom-block-title">MEMORY AWARENESS</p> <p>Misusing the Gatherer might end up causing memory leaks, consider the following example:</p> <div class="language-python line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-python"><code>matches <span class="token operator">=</span> list_with_30k_match_timelines <span class="token comment"># &lt;-- Suppose</span>
<span class="token keyword">async</span> <span class="token keyword">with</span> Gatherer<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> gatherer<span class="token punctuation">:</span>
    gatherer<span class="token punctuation">.</span>statements <span class="token operator">=</span> matches
    <span class="token keyword">await</span> gatherer<span class="token punctuation">.</span>gather<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># &lt;-- This will load aprox. 10 GB to memory</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>This is because <code>matches</code> is a mutable object, so it will be passed to the gatherer by reference. It will end up filling the 30k matches on that list. A workaround to this would be to load your matches in a loop scope so that Python can garbage collect it, or even better you can use the utils <code>FrozenGenerator</code> along with the other gathering tool <code>Queue</code>.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>A good use of inline type hinting can help you with IDE autocompletion. For example, in line 9 I added the type hint of the expected response objects class via comments, then on the next <code>for</code> loop you don't lose IDE autocompletion. Note: You might not be able to use this if responses contain more than 1 Pyot Core object type.</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/18/2021, 3:36:34 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Pyot/core/settings.html" class="prev">
        Settings
      </a></span> <span class="next"><a href="/Pyot/core/queue.html">
        Queue
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Pyot/assets/js/app.24095c48.js" defer></script><script src="/Pyot/assets/js/2.498ad1fd.js" defer></script><script src="/Pyot/assets/js/15.482c3d4a.js" defer></script><script src="/Pyot/assets/js/3.ca271cab.js" defer></script>
  </body>
</html>
