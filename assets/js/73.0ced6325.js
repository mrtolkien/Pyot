(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{423:function(e,t,a){"use strict";a.r(t);var s=a(42),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"pipeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pipeline"}},[e._v("#")]),e._v(" Pipeline")]),e._v(" "),a("p",[e._v("Just gonna copy paste from "),a("a",{attrs:{href:"https://github.com/meraki-analytics/cassiopeia",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cassiopeia"),a("OutboundLink")],1),e._v(" because no need to rephrase merely same thing twice:")]),e._v(" "),a("blockquote",[a("p",[e._v("The data pipeline is the series of caches, databases, and data sources (such as the Riot API) that both provide and store data. Data sources provide data, while data sinks store data; we call both of these “data stores”. Some parts of the data pipeline are only data sources (for example, the Riot API), while others are both data sources and data sinks (for example, caches and databases). The data pipeline is a list of data stores, where the order the data stores specifies how data is pulled and stored (see the next paragraph). Usually faster data stores go at the beginning of the data pipeline.")]),e._v(" "),a("p",[e._v("When data is queried, a query dictionary is constructed containing the information needed to uniquely identify an object in a data source (e.g. a "),a("code",[e._v("region")]),e._v(" and "),a("code",[e._v("summoner.id")]),e._v(" are required when querying for "),a("code",[e._v("Summoner")]),e._v(" objects). This query is passed up the data pipeline through the data sources, and at each data source the data pipeline asks if that source can supply the requested object. If the source can supply the object (for example, if the object is in the database, or if the Riot API can send the object/data), it is returned. If the source does not supply the object, the next data source in the pipeline is queried. If no data source can provide an object for the query, a "),a("code",[e._v("datapipelines.NotFoundError")]),e._v(" is thrown.")]),e._v(" "),a("p",[e._v("After an object is returned by a data source, the object gets passed back down the pipeline. Any data sinks along the way store the object that was returned by the data source. In this way, the cache (which should be at the front of the data pipeline) will store any object that a database or the Riot API returned.")])]),e._v(" "),a("p",[e._v('Same happens in Pyot: Creates a Token that passes through the pipeline trying to get the data in the order, gets the data and sink down again. In Pyot any caches, db, and data sources are called "Stores", '),a("strong",[a("em",[e._v("stores orders in the settings matters because that is the order of how Pyot prioritizes lookup.")])]),e._v("\nEach model will have its own pipeline, this is needed to create isolated environments and session groups that is better to maintain.")]),e._v(" "),a("h1",{attrs:{id:"low-level-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#low-level-api"}},[e._v("#")]),e._v(" Low Level API")]),e._v(" "),a("p",[e._v("Each created pipeline can be accessed as a "),a("strong",[a("em",[e._v("dictionary")])]),e._v(" at the "),a("code",[e._v("pipeline")]),e._v(" module. The keys are the models names "),a("strong",[a("em",[e._v("in lower case")])]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[e._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" pyot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("pipeline "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" pipelines\n\nlol_pipe "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" pipelines"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"lol"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("This object is created per "),a("code",[e._v("Settings")]),e._v(" instance created. Below is a list of methods for the "),a("strong",[a("em",[e._v("low level Pyot Pipeline API (You should use this only in specific cases, most cases Pyot Core objects will automatically deal this for you)")])]),e._v(".")]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"init-model-str-stores-list-any"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init-model-str-stores-list-any"}},[e._v("#")]),e._v(" "),a("code",[e._v("__init__(model:str, stores: List[Any])")])]),e._v(" "),a("p",[e._v("Creates a pipeline object")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("model")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> str: Name of the object.")],1),e._v(" "),a("li",[a("code",[e._v("stores")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> List[StoreObject]: List of Stores to add on the pipeline.")],1)])]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"get-token-pipelinetoken-sid-str-none"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-token-pipelinetoken-sid-str-none"}},[e._v("#")]),e._v(" "),a("code",[e._v("get(token: PipelineToken, sid: str = None)")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("p",[e._v("Method that starts lookup on stores, internal used by "),a("code",[e._v("PyotCore")]),e._v(" objects "),a("strong",[a("em",[e._v("and automatically sinks the data through the pipeline, so "),a("code",[e._v("set()")]),e._v(" is not necessary afterwards.")])])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("token")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> PipelineToken: The token to use for identifying the data, created using "),a("code",[e._v("create_token()")]),e._v(" on Pyot Core objects. Required")],1),e._v(" "),a("li",[a("code",[e._v("sid")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> str: The sid identifying the session to reuse.")],1)])]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"set-self-token-pipelinetoken-value-any-stop-none"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-self-token-pipelinetoken-value-any-stop-none"}},[e._v("#")]),e._v(" "),a("code",[e._v("set(self, token: PipelineToken, value: Any, stop=None)")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("ul",[a("li",[a("code",[e._v("token")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> PipelineToken: The token to use for identifying the data, created using "),a("code",[e._v("create_token()")]),e._v(" on Pyot Core objects. Required")],1),e._v(" "),a("li",[a("code",[e._v("value")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> Any: The data value to be cached on the pipeline Stores of type "),a("Badge",{attrs:{text:"Pyot Cache",vertical:"middle"}}),e._v(". Required")],1),e._v(" "),a("li",[a("code",[e._v("stop")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> PyotStoreObject: The instance of the store that it should stop (hence not sink further).")],1)])]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"post-self-token-pipelinetoken-body-any-sid-str-none"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#post-self-token-pipelinetoken-body-any-sid-str-none"}},[e._v("#")]),e._v(" "),a("code",[e._v("post(self, token: PipelineToken, body: Any, sid: str = None)")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("ul",[a("li",[a("code",[e._v("token")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> PipelineToken: The token to use for identifying the data, created using "),a("code",[e._v("create_token()")]),e._v(" on Pyot Core objects. Required")],1),e._v(" "),a("li",[a("code",[e._v("body")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> Any: The data body to be used for requesting in Stores of type "),a("Badge",{attrs:{text:"Pyot Service",vertical:"middle"}}),e._v(". Required")],1),e._v(" "),a("li",[a("code",[e._v("sid")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> str: The sid identifying the session to reuse.")],1)])]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"put-self-token-pipelinetoken-body-any-sid-str-none"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#put-self-token-pipelinetoken-body-any-sid-str-none"}},[e._v("#")]),e._v(" "),a("code",[e._v("put(self, token: PipelineToken, body: Any, sid: str = None)")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("ul",[a("li",[a("code",[e._v("token")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> PipelineToken: The token to use for identifying the data, created using "),a("code",[e._v("create_token()")]),e._v(" on Pyot Core objects. Required")],1),e._v(" "),a("li",[a("code",[e._v("body")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> Any: The data body to be used for requesting in Stores of type "),a("Badge",{attrs:{text:"Pyot Service",vertical:"middle"}}),e._v(". Required")],1),e._v(" "),a("li",[a("code",[e._v("sid")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> str: The sid identifying the session to reuse.")],1)])]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"clear"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#clear"}},[e._v("#")]),e._v(" "),a("code",[e._v("clear()")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("p",[e._v("Clear all the stores of type "),a("Badge",{attrs:{text:"Pyot Cache",vertical:"middle"}}),e._v(".")],1)]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"expire"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expire"}},[e._v("#")]),e._v(" "),a("code",[e._v("expire()")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("p",[e._v("Expire all the stores of type "),a("Badge",{attrs:{text:"Pyot Cache",vertical:"middle"}}),e._v(" that cannot actively expire objects.")],1)]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"delete-token-pipelinetoken"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delete-token-pipelinetoken"}},[e._v("#")]),e._v(" "),a("code",[e._v("delete(token: PipelineToken)")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("p",[e._v("Delete a data from all the stores of type "),a("Badge",{attrs:{text:"Pyot Cache",vertical:"middle"}}),e._v(".")],1),e._v(" "),a("ul",[a("li",[a("code",[e._v("token")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> PipelineToken: The token to use for identifying the data, created using "),a("code",[e._v("create_token()")]),e._v(" on Pyot Core objects. Required")],1)])]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"contains-token-pipelinetoken"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contains-token-pipelinetoken"}},[e._v("#")]),e._v(" "),a("code",[e._v("contains(token: PipelineToken)")]),e._v(" "),a("Badge",{attrs:{text:"function",type:"error",vertical:"middle"}}),e._v(" "),a("Badge",{attrs:{text:"awaitable",type:"error",vertical:"middle"}})],1),e._v(" "),a("p",[e._v("Return "),a("code",[e._v("True")]),e._v(" if one of the stores contains the data.")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("token")]),e._v(" "),a("Badge",{attrs:{text:"param",type:"warning",vertical:"middle"}}),e._v(" -> PipelineToken: The token to use for identifying the data, created using "),a("code",[e._v("create_token()")]),e._v(" on Pyot Core objects. Required")],1)])]),e._v(" "),a("blockquote",[a("h2",{attrs:{id:"sessions-mapping-str-any"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sessions-mapping-str-any"}},[e._v("#")]),e._v(" "),a("code",[e._v("sessions: Mapping[str, Any]")]),e._v(" "),a("Badge",{attrs:{text:"property",type:"error",vertical:"middle"}})],1),e._v(" "),a("p",[e._v("A dict that stores living session id to session instances, typically used by "),a("code",[e._v("Gatherer")]),e._v(" and "),a("code",[e._v("Queue")]),e._v(", to add a new session do "),a("code",[e._v("x.sessions[your_session_id] = session")]),e._v(" where "),a("code",[e._v("x")]),e._v(" is the pipeline instance, "),a("code",[e._v("your_session_id")]),e._v(" the key identifying the session and "),a("code",[e._v("session")]),e._v(" the session instance.")])]),e._v(" "),a("h2",{attrs:{id:"example-usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-usage"}},[e._v("#")]),e._v(" Example Usage")]),e._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" pyot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("pipeline "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" pipelines\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" pyot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("utils "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" loop_run\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("async")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("def")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("clear_everything")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    lol "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" pipelines"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"lol"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("await")]),e._v(" lol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("clear"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\nloop_run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("clear_everything"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);